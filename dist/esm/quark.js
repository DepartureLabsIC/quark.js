let e,r=[];const i=["ii"],t=["ICP"],o=o=>{function n(e=[]){if(!Array.isArray(e))throw new Error("The field `basket` must be an array");if(!e.length)throw new Error("You should provide at least one item to check-out");const r=e.every((e=>{if(!e.name)throw new Error("The field `name` is required");if(!e.value)throw new Error("The field `value` is required");if(!e.valueType)throw new Error("The field `valueType` is required");if("string"!=typeof e.name)throw new Error("The field `name` must be of type 'string'");if("number"!=typeof e.value)throw new Error("The field `value` must be of type 'number'");if("string"!=typeof e.valueType)throw new Error("The field `valueType` must be of type 'string'");if(!t.includes("ICP"))throw new Error("The field `valueType` must be one of: "+t.join(", "));if(e.description&&"string"!=typeof e.description)throw new Error("The field `description` must be of type 'string'");return!0})),i=function(e=[]){let r=0;return e.forEach((e=>r+=Number(e.value))),r}(e);return r&&i>=0}return function(e){if(!e.payee)throw new Error("The field `payee` is required");if(!e.domain)throw new Error("The field `domain` is required");if(!e.notify)throw new Error("The field `notify` is required");if(!e.authProvider)throw new Error("The field `authProvider` is required");if("string"!=typeof e.payee)throw new Error("The field `payee` must be of type 'string'");if("string"!=typeof e.domain)throw new Error("The field `domain` must be of type 'string'");if("string"!=typeof e.authProvider)throw new Error("The field `authProvider` must be of type 'string'");if("object"!=typeof e.notify)throw new Error("The field `notify` must be of type 'object'");if(!e.notify.principalId||!e.notify.methodName)throw new Error("The field `notify` must have two properties: `principalId` and `methodName`");if(!e.notify.principalId)throw new Error("The field `notify` requires a field called `principalId`");if("string"!=typeof e.notify.principalId)throw new Error("The field `notify.principalId` must be of type 'string'");if(!e.notify.methodName)throw new Error("The field `notify` requires a field called `methodName`");if("string"!=typeof e.notify.methodName)throw new Error("The field `notify.methodName` must be of type 'string'");if(!i.includes(e.authProvider))throw new Error("The field `authProvider` must be one of: "+i.join(", "))}(o),window.addEventListener("message",(function(i){if(i.origin===o.domain&&["checkoutLoaded","checkoutComplete"].includes(i.data.type))if("checkoutLoaded"===i.data.type){const i=JSON.stringify({type:"basketUpdate",basket:r,origin:origin,notify:o.notify,payee:o.payee,authProvider:o.authProvider},((e,r)=>"bigint"==typeof r?Number(r):r));e.postMessage(i,o.domain)}else o.callback(i.data)}),!1),{checkout:function(i){if(!n(i))return;r=i;const t=JSON.stringify({origin:window.origin,authProvider:o.authProvider});e=window.open(`${o.domain}/checkout?checkoutData=${btoa(t)}`,"_blank")}}};export{o as init};
//# sourceMappingURL=quark.js.map
